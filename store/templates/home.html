{% extends 'base.html' %}

{% block title %}Oporup{% endblock %}

{% block extra_head %} 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* The base state of the button */
        .add-to-cart-btn {
            background-color: #b15b2c;
            border: none;
            transition: background-color 0.2s ease; /* Makes the color change smooth */
        }

        /* Hover state: makes the color lighter */
        .add-to-cart-btn:hover {
            background-color: #ff8547; /* A lighter shade of orange */
            color: white; /* Ensures text stays white */
        }

        /* Active state: when the button is being clicked/pressed */
        .add-to-cart-btn:active {
            background-color: #d65614; /* A darker shade of orange */
            transform: scale(0.98);    /* Optional: slightly shrinks the button for a "pressed" feel */
        }
        /* 1. Set the height of the slider (600px is standard for Hero sections) */
        /* 1. Set a smaller height for the container style slider */
        .c-item {
        height: 400px;
        }

        /* 2. Ensure images cover the area without stretching */
        .c-img {
        height: 100%;
        object-fit: cover;
        filter: brightness(0.6); 
        }
    </style>
    
{% endblock %}

{% block content %}

        <!-- Header-->
        {% include 'header.html' %}


        <!-- Section-->
        {% include 'section.html' %}

        {% include 'pagination.html' %}

<script>
    $(document).on('click', '.add-to-cart-btn', function(e){
        e.preventDefault();
        
        // 'this' refers to the specific button that was clicked
        var productid = $(this).val(); 
        
        $.ajax({
            type: 'POST',
            url: "{% url 'cart_add' %}",
            data: {
                product_id: productid,
                // Note: If you have a qty selector, ensure it's found relative to this button
                product_qty: $('#qty-cart option:selected').text() || 1, 
                csrfmiddlewaretoken: '{{ csrf_token }}',
                action: 'post',
            },
            success: function(json){
                document.getElementById('cart_quantity').textContent = json.qty;
            },
            error: function(xhr, errmsg, err){
                console.log(xhr.status + ": " + xhr.responseText);
            }
        });
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}