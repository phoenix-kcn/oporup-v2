{% block extra_head %}
<style>
    /* Container to stack messages top-right */
    #msg-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    /* The Message Box */
    .custom-msg {
        background: white;
        color: #333;
        padding: 16px 24px;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        font-family: system-ui, -apple-system, sans-serif;
        font-size: 14px;
        font-weight: 500;
        border-left: 5px solid #333; /* Default border color */
        
        /* Animation Start State: Hidden to the right */
        transform: translateX(120%);
        transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Bouncy effect */
    }

    /* Animation End State: On Screen */
    .custom-msg.show {
        transform: translateX(0);
    }

    /* Colors based on Django tags */
    .custom-msg.success { border-left-color: #2ecc71; }
    .custom-msg.error { border-left-color: #e74c3c; }
    .custom-msg.warning { border-left-color: #f1c40f; }
    .custom-msg.info { border-left-color: #3498db; }
</style>
{% endblock %}


{% block content %}
<div id="msg-container">
    {% if messages %}
        {% for message in messages %}
            <div class="custom-msg {{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Select all message boxes
        const messages = document.querySelectorAll('.custom-msg');

        messages.forEach((msg, index) => {
            // 1. SLIDE IN (Staggered by index so they don't all pop at once)
            setTimeout(() => {
                msg.classList.add('show');
            }, 100 * (index + 1));

            // 2. SLIDE OUT (After 2 seconds)
            setTimeout(() => {
                msg.classList.remove('show');
                
                // 3. REMOVE FROM DOM (After the slide out animation finishes)
                setTimeout(() => {
                    msg.remove();
                }, 400); // Matches CSS transition time
            }, 2500); // 2500ms = 2.5 seconds total visibility
        });
    });
</script>
{% endblock %}